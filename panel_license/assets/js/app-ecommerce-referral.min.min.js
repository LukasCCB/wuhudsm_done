"use strict";$(function(){let borderColor,bodyBg,headingColor;if(isDarkStyle){borderColor=config.colors_dark.borderColor;bodyBg=config.colors_dark.bodyBg;headingColor=config.colors_dark.headingColor}else{borderColor=config.colors.borderColor;bodyBg=config.colors.bodyBg;headingColor=config.colors.headingColor}var dt_user_table=$(".datatables-referral"),customerView="app-ecommerce-customer-details-overview.html",statusObj={1:{title:"Paid",class:"bg-label-success"},2:{title:"Unpaid",class:"bg-label-warning"},3:{title:"Rejected",class:"bg-label-danger"}};if(dt_user_table.length){var dt_user=dt_user_table.DataTable({ajax:assetsPath+"json/ecommerce-referral.json",columns:[{data:""},{data:"id"},{data:"user"},{data:"referred_id"},{data:"status"},{data:"value"},{data:"earning"}],columnDefs:[{className:"control",searchable:false,orderable:false,responsivePriority:2,targets:0,render:function(data,type,full,meta){return""}},{targets:1,orderable:false,searchable:false,responsivePriority:3,checkboxes:true,render:function(){return'<input type="checkbox" class="dt-checkboxes form-check-input">'},checkboxes:{selectAllRender:'<input type="checkbox" class="form-check-input">'}},{targets:2,responsivePriority:1,render:function(data,type,full,meta){var $name=full["user"],$email=full["email"],$image=full["avatar"];if($image){var $output='<img src="'+assetsPath+"img/avatars/"+$image+'" alt="Avatar" class="rounded-circle">'}else{var stateNum=Math.floor(Math.random()*6);var states=["success","danger","warning","info","dark","primary","secondary"];var $state=states[stateNum],$name=full["user"],$initials=$name.match(/\b\w/g)||[];$initials=(($initials.shift()||"")+($initials.pop()||"")).toUpperCase();$output='<span class="avatar-initial rounded-circle bg-label-'+$state+'">'+$initials+"</span>"}var $row_output='<div class="d-flex justify-content-start align-items-center customer-name">'+'<div class="avatar-wrapper me-3">'+'<div class="avatar avatar-sm">'+$output+"</div>"+"</div>"+'<div class="d-flex flex-column">'+'<a href="'+customerView+'"><span class="text-heading fw-medium text-truncate">'+$name+"</span></a>"+'<small class="text-nowrap">'+$email+"</small>"+"</div>"+"</div>";return $row_output}},{targets:3,render:function(data,type,full,meta){var $role=full["referred_id"];return'<span class="text-heading">'+$role+"</span>"}},{targets:4,render:function(data,type,full,meta){var $status=full["status"];return'<span class="badge rounded-pill '+statusObj[$status].class+'" text-capitalized>'+statusObj[$status].title+"</span>"}},{targets:5,render:function(data,type,full,meta){var $plan=full["value"];return'<span  class="text-heading">'+$plan+"</span>"}},{targets:6,render:function(data,type,full,meta){var $earn=full["earning"];return'<span  class="text-heading">'+$earn+"</span > "}}],order:[[2,"asc"]],dom:'<"card-header d-flex flex-column flex-sm-row pb-md-0 align-items-start align-items-sm-center pt-md-2"<"head-label"><"d-flex align-items-sm-center justify-content-end mt-2 mt-sm-0 gap-3"l<"dt-action-buttons"B>>'+">t"+'<"row mx-2"'+'<"col-sm-12 col-md-6"i>'+'<"col-sm-12 col-md-6"p>'+">",language:{sLengthMenu:"_MENU_"},buttons:[{extend:"collection",className:"btn btn-primary dropdown-toggle",text:'<i class="mdi mdi-export-variant me-1"></i> <span class="d-none d-sm-inline-block">Export</span>',buttons:[{extend:"print",text:'<i class="mdi mdi-printer-outline me-1" ></i>Print',className:"dropdown-item",exportOptions:{columns:[1,2,3,4,5],format:{body:function(inner,coldex,rowdex){if(inner.length<=0)return inner;var el=$.parseHTML(inner);var result="";$.each(el,function(index,item){if(item.classList!==undefined&&item.classList.contains("customer-name")){result=result+item.lastChild.firstChild.textContent}else if(item.innerText===undefined){result=result+item.textContent}else result=result+item.innerText});return result}}},customize:function(win){$(win.document.body).css("color",headingColor).css("border-color",borderColor).css("background-color",bodyBg);$(win.document.body).find("table").addClass("compact").css("color","inherit").css("border-color","inherit").css("background-color","inherit")}},{extend:"csv",text:'<i class="mdi mdi-file-document-outline me-1" ></i>Csv',className:"dropdown-item",exportOptions:{columns:[1,2,3,4,5],format:{body:function(inner,coldex,rowdex){if(inner.length<=0)return inner;var el=$.parseHTML(inner);var result="";$.each(el,function(index,item){if(item.classList!==undefined&&item.classList.contains("customer-name")){result=result+item.lastChild.firstChild.textContent}else if(item.innerText===undefined){result=result+item.textContent}else result=result+item.innerText});return result}}}},{extend:"excel",text:'<i class="mdi mdi-file-excel-outline me-1"></i>Excel',className:"dropdown-item",exportOptions:{columns:[1,2,3,4,5],format:{body:function(inner,coldex,rowdex){if(inner.length<=0)return inner;var el=$.parseHTML(inner);var result="";$.each(el,function(index,item){if(item.classList!==undefined&&item.classList.contains("customer-name")){result=result+item.lastChild.firstChild.textContent}else if(item.innerText===undefined){result=result+item.textContent}else result=result+item.innerText});return result}}}},{extend:"pdf",text:'<i class="mdi mdi-file-pdf-box me-1"></i>Pdf',className:"dropdown-item",exportOptions:{columns:[1,2,3,4,5],format:{body:function(inner,coldex,rowdex){if(inner.length<=0)return inner;var el=$.parseHTML(inner);var result="";$.each(el,function(index,item){if(item.classList!==undefined&&item.classList.contains("customer-name")){result=result+item.lastChild.firstChild.textContent}else if(item.innerText===undefined){result=result+item.textContent}else result=result+item.innerText});return result}}}},{extend:"copy",text:'<i class="mdi mdi-content-copy me-1"></i>Copy',className:"dropdown-item",exportOptions:{columns:[1,2,3,4,5],format:{body:function(inner,coldex,rowdex){if(inner.length<=0)return inner;var el=$.parseHTML(inner);var result="";$.each(el,function(index,item){if(item.classList!==undefined&&item.classList.contains("customer-name")){result=result+item.lastChild.firstChild.textContent}else if(item.innerText===undefined){result=result+item.textContent}else result=result+item.innerText});return result}}}}]}],responsive:{details:{display:$.fn.dataTable.Responsive.display.modal({header:function(row){var data=row.data();return"Details of "+data["user"]}}),type:"column",renderer:function(api,rowIdx,columns){var data=$.map(columns,function(col,i){return col.title!==""?'<tr data-dt-row="'+col.rowIndex+'" data-dt-column="'+col.columnIndex+'">'+"<td>"+col.title+":"+"</td> "+"<td>"+col.data+"</td>"+"</tr>":""}).join("");return data?$('<table class="table"/><tbody />').append(data):false}}}});$("div.head-label").html('<h5 class="card-title text-nowrap mb-2 mb-sm-0">Referred users</h5>');$(".dataTables_length").addClass("mt-0 mt-md-3");$(".dt-action-buttons").addClass("pt-0")}setTimeout(()=>{$(".dataTables_filter .form-control").removeClass("form-control-sm");$(".dataTables_length .form-select").removeClass("form-select-sm")},300)});