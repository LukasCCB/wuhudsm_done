"use strict";$(function(){let borderColor,bodyBg,headingColor;if(isDarkStyle){borderColor=config.colors_dark.borderColor;bodyBg=config.colors_dark.bodyBg;headingColor=config.colors_dark.headingColor}else{borderColor=config.colors.borderColor;bodyBg=config.colors.bodyBg;headingColor=config.colors.headingColor}var dt_customer_table=$(".datatables-customers"),select2=$(".select2"),customerView="app-ecommerce-customer-details-overview.html";if(select2.length){var $this=select2;select2Focus($this);$this.wrap('<div class="position-relative"></div>').select2({placeholder:"United States ",dropdownParent:$this.parent()})}if(dt_customer_table.length){var dt_customer=dt_customer_table.DataTable({ajax:assetsPath+"json/ecommerce-customer-all.json",columns:[{data:""},{data:"id"},{data:"customer"},{data:"customer_id"},{data:"country"},{data:"order"},{data:"total_spent"}],columnDefs:[{className:"control",searchable:false,orderable:false,responsivePriority:2,targets:0,render:function(data,type,full,meta){return""}},{targets:1,orderable:false,searchable:false,responsivePriority:3,checkboxes:true,render:function(){return'<input type="checkbox" class="dt-checkboxes form-check-input">'},checkboxes:{selectAllRender:'<input type="checkbox" class="form-check-input">'}},{targets:2,responsivePriority:1,render:function(data,type,full,meta){var $name=full["customer"],$email=full["email"],$image=full["image"];if($image){var $output='<img src="'+assetsPath+"img/avatars/"+$image+'" alt="Avatar" class="rounded-circle">'}else{var stateNum=Math.floor(Math.random()*6);var states=["success","danger","warning","info","dark","primary","secondary"];var $state=states[stateNum],$name=full["customer"],$initials=$name.match(/\b\w/g)||[];$initials=(($initials.shift()||"")+($initials.pop()||"")).toUpperCase();$output='<span class="avatar-initial rounded-circle bg-label-'+$state+'">'+$initials+"</span>"}var $row_output='<div class="d-flex justify-content-start align-items-center customer-name">'+'<div class="avatar-wrapper me-3">'+'<div class="avatar avatar-sm">'+$output+"</div>"+"</div>"+'<div class="d-flex flex-column">'+'<a href="'+customerView+'"><span class="text-heading fw-medium text-truncate">'+$name+"</span></a>"+'<small class="text-truncate">'+$email+"</small>"+"</div>"+"</div>";return $row_output}},{targets:3,render:function(data,type,full,meta){var $id=full["customer_id"];return'<span class="text-heading">#'+$id+"</span>"}},{targets:4,render:function(data,type,full,meta){var $plan=full["country"];var $code=full["country_code"];if($code){var $output_code=`<i class ="fis fi fi-${$code} rounded-circle me-2 fs-3"></i>`}else{var $output_code=`<i class ="fis fi fi-xx rounded-circle me-2 fs-3"></i>`}var $row_output='<div class="d-flex justify-content-start align-items-center customer-country">'+"<div>"+$output_code+"</div>"+"<div>"+"<span>"+$plan+"</span>"+"</div>"+"</div>";return $row_output}},{targets:5,render:function(data,type,full,meta){var $status=full["order"];return"<span>"+$status+"</span>"}},{targets:6,render:function(data,type,full,meta){var $spent=full["total_spent"];return'<h6 class="mb-0">'+$spent+"</h6>"}}],order:[[2,"desc"]],dom:'<"card-header d-flex rounded-0 flex-wrap py-md-0"'+'<"me-5 pe-5"f>'+'<"d-flex justify-content-start justify-content-md-end align-items-baseline"<"dt-action-buttons d-flex align-items-start align-items-md-center justify-content-sm-center mb-3 mb-sm-0 gap-3"lB>>'+">t"+'<"row mx-1"'+'<"col-sm-12 col-md-6"i>'+'<"col-sm-12 col-md-6"p>'+">",language:{sLengthMenu:"_MENU_",search:"",searchPlaceholder:"Search Order"},buttons:[{extend:"collection",className:"btn btn-label-secondary dropdown-toggle me-3",text:'<i class="mdi mdi-export-variant me-1"></i> <span class="d-none d-sm-inline-block">Export</span>',buttons:[{extend:"print",text:'<i class="mdi mdi-printer-outline me-1" ></i>Print',className:"dropdown-item",exportOptions:{columns:[1,2,3,4,5],format:{body:function(inner,coldex,rowdex){if(inner.length<=0)return inner;var el=$.parseHTML(inner);var result="";$.each(el,function(index,item){if(item.classList!==undefined&&item.classList.contains("customer-name")){result=result+item.lastChild.firstChild.textContent}else if(item.innerText===undefined){result=result+item.textContent}else result=result+item.innerText});return result}}},customize:function(win){$(win.document.body).css("color",headingColor).css("border-color",borderColor).css("background-color",bodyBg);$(win.document.body).find("table").addClass("compact").css("color","inherit").css("border-color","inherit").css("background-color","inherit")}},{extend:"csv",text:'<i class="mdi mdi-file-document-outline me-1" ></i>Csv',className:"dropdown-item",exportOptions:{columns:[1,2,3,4,5],format:{body:function(inner,coldex,rowdex){if(inner.length<=0)return inner;var el=$.parseHTML(inner);var result="";$.each(el,function(index,item){if(item.classList!==undefined&&item.classList.contains("customer-name")){result=result+item.lastChild.firstChild.textContent}else if(item.innerText===undefined){result=result+item.textContent}else result=result+item.innerText});return result}}}},{extend:"excel",text:'<i class="mdi mdi-file-excel-outline me-1"></i>Excel',className:"dropdown-item",exportOptions:{columns:[1,2,3,4,5],format:{body:function(inner,coldex,rowdex){if(inner.length<=0)return inner;var el=$.parseHTML(inner);var result="";$.each(el,function(index,item){if(item.classList!==undefined&&item.classList.contains("customer-name")){result=result+item.lastChild.firstChild.textContent}else if(item.innerText===undefined){result=result+item.textContent}else result=result+item.innerText});return result}}}},{extend:"pdf",text:'<i class="mdi mdi-file-pdf-box me-1"></i>Pdf',className:"dropdown-item",exportOptions:{columns:[1,2,3,4,5],format:{body:function(inner,coldex,rowdex){if(inner.length<=0)return inner;var el=$.parseHTML(inner);var result="";$.each(el,function(index,item){if(item.classList!==undefined&&item.classList.contains("customer-name")){result=result+item.lastChild.firstChild.textContent}else if(item.innerText===undefined){result=result+item.textContent}else result=result+item.innerText});return result}}}},{extend:"copy",text:'<i class="mdi mdi-content-copy me-1"></i>Copy',className:"dropdown-item",exportOptions:{columns:[1,2,3,4,5],format:{body:function(inner,coldex,rowdex){if(inner.length<=0)return inner;var el=$.parseHTML(inner);var result="";$.each(el,function(index,item){if(item.classList!==undefined&&item.classList.contains("customer-name")){result=result+item.lastChild.firstChild.textContent}else if(item.innerText===undefined){result=result+item.textContent}else result=result+item.innerText});return result}}}}]},{text:'<i class="mdi mdi-plus me-0 me-sm-1"></i><span class="d-none d-sm-inline-block">Add Customer</span>',className:"add-new btn btn-primary ms-n1",attr:{"data-bs-toggle":"offcanvas","data-bs-target":"#offcanvasEcommerceCustomerAdd"}}],responsive:{details:{display:$.fn.dataTable.Responsive.display.modal({header:function(row){var data=row.data();return"Details of "+data["customer"]}}),type:"column",renderer:function(api,rowIdx,columns){var data=$.map(columns,function(col,i){return col.title!==""?'<tr data-dt-row="'+col.rowIndex+'" data-dt-column="'+col.columnIndex+'">'+"<td>"+col.title+":"+"</td> "+"<td>"+col.data+"</td>"+"</tr>":""}).join("");return data?$('<table class="table"/><tbody />').append(data):false}}}});$(".dataTables_length").addClass("mt-0 mt-md-3");$(".dt-action-buttons").addClass("pt-0");$(".dataTables_filter input").addClass("ms-0")}setTimeout(()=>{$(".dataTables_filter .form-control").removeClass("form-control-sm");$(".dataTables_length .form-select").removeClass("form-select-sm")},300)});(function(){const phoneMaskList=document.querySelectorAll(".phone-mask"),eCommerceCustomerAddForm=document.getElementById("eCommerceCustomerAddForm");if(phoneMaskList){phoneMaskList.forEach(function(phoneMask){new Cleave(phoneMask,{phone:true,phoneRegionCode:"US"})})}const fv=FormValidation.formValidation(eCommerceCustomerAddForm,{fields:{customerName:{validators:{notEmpty:{message:"Please enter fullname "}}},customerEmail:{validators:{notEmpty:{message:"Please enter your email"},emailAddress:{message:"The value is not a valid email address"}}}},plugins:{trigger:new FormValidation.plugins.Trigger,bootstrap5:new FormValidation.plugins.Bootstrap5({eleValidClass:"",rowSelector:function(field,ele){return".mb-4"}}),submitButton:new FormValidation.plugins.SubmitButton,autoFocus:new FormValidation.plugins.AutoFocus}})})();